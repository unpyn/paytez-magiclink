(self.webpackChunkPaytez_web=self.webpackChunkPaytez_web||[]).push([[787],{4802:function(e,t,n){"use strict";n.d(t,{TE:function(){return y},iZ:function(){return p},sq:function(){return h},yX:function(){return f},EG:function(){return m},mB:function(){return g},iW:function(){return x},RF:function(){return b}});var r=n(23680),a=n(24611),s=n(53755),i=n(26219),c=n(50959),u=n(5779),o=n(7733),l=n.n(o),d=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]'),p=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBalance();case 2:return n=e.sent,r=i.bM(n,18),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var s,u,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new c.CH(t,d,r),e.next=3,s.balanceOf(n);case 3:return u=e.sent,o=i.bM(u,"ether"),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new c.CH(t,d,n),e.next=3,r.symbol();case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){navigator.clipboard.writeText(e).then((function(){u.aS.success("Copied")})).catch((function(e){u.aS.failure("Error copying text to clipboard:")}))},h=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,s,i,c=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"USD",e.prev=1,e.next=4,l().get("https://api.coingecko.com/api/v3/simple/price?ids=".concat(t,"&vs_currencies=").concat(n,"&x_cg_demo_api_key=CG-uTaKZVjZTx7tzeHj1BkVXj4A"));case 4:return r=e.sent,s=r.data,i=s[t][n.toLowerCase()],e.abrupt("return",parseFloat(i||1).toFixed(4));case 10:return e.prev=10,e.t0=e.catch(1),console.log("errr",e.t0),e.abrupt("return",0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,s,c){var u,o,l,d,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.sendTransaction({to:s,value:i.fi(c)});case 2:return u=e.sent,console.log("transactionHash",u.hash),e.next=6,g(u.hash,t);case 6:return o=e.sent,l=(0,r.Z)(o,2),d=l[0],p=l[1],e.abrupt("return",{txhash:d,status:p});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),b=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,s,u,o){var l,p,f,m,y,h,x,b;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=new c.CH(s,d,n),p=u,console.log("sendAddress",u),console.log("sendValue",o),f=i.vz(o,"18"),e.next=7,l.transfer(p,f);case 7:return m=e.sent,console.log("transactionHash",m.hash),e.next=11,g(m.hash,t);case 11:return y=e.sent,h=(0,r.Z)(y,2),x=h[0],b=h[1],e.abrupt("return",{txhash:x,status:b});case 16:case"end":return e.stop()}}),e)})));return function(t,n,r,a,s){return e.apply(this,arguments)}}(),v=function(e){return new Promise((function(t){return setTimeout(t,e)}))},g=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null;case 1:if(null!=r){e.next=9;break}return e.next=4,n.getTransactionReceipt(t);case 4:return r=e.sent,e.next=7,v(3e3);case 7:e.next=1;break;case 9:if(!r.status){e.next=13;break}return e.abrupt("return",[t,!0]);case 13:return e.abrupt("return",[t,!1]);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},78193:function(e,t,n){"use strict";var r=n(24611),a=n(53755),s=n(23680),i=n(76870),c=n(89157),u=n(73430),o=n.n(u),l=n(12281),d=n(53384),p=(n(71623),n(99033)),f=n(79153),m=n(5779),y=n(52516),h=new(o())({cacheProvider:!0,providerOptions:{walletconnect:{package:l.Z,options:{infuraId:"27e484dcd9e3efcfd25a83a78777cdf1",rpc:{50:"https://rpc.xinfin.network",51:"https://erpc.apothem.network"}}}}});t.Z=function(){var e=(0,i.useState)(),t=(0,s.Z)(e,2),n=(t[0],t[1]),u=(0,p.v9)((function(e){return e.web3})).connected,o=(0,p.I0)();(0,i.useEffect)((function(){h.cachedProvider&&!u&&l()}),[]);var l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,a,s,i,u,l,p,y;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.connect();case 3:return t=e.sent,a=new d.Q(t),e.next=7,a.getNetwork();case 7:if(s=e.sent,i=s.chainId,u=m.cz.find((function(e){return e.networkID===i}))){e.next=13;break}return m.ah.warning("Network Mismatch","Please Switch to XDC Apothem","OK"),e.abrupt("return");case 13:return e.next=15,a.listAccounts();case 15:if(0!==e.sent.length){e.next=19;break}return c.Report.warning("No Account Connected","Xdc Pay Not LoggedIn.Kindly login your XDC Pay","OK"),e.abrupt("return");case 19:return l=a.getSigner(),e.next=22,l.getAddress();case 22:p=e.sent,n(p),y={provider:a,address:p,signer:l,web3Modal:h,connected:!0,chainId:i,symbol:u.symbol,networkName:u.networkName},o((0,f.fY)(y)),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.log("err",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}();return(0,y.jsx)(i.Fragment,{children:(0,y.jsx)("div",{className:"mb-0 text-center d-grid",children:u?(0,y.jsxs)("button",{type:"button",onClick:function(){return o((0,f.eW)())},className:"btn btn-primary",children:[(0,y.jsx)("span",{children:"Disconnect Wallet"})," ",(0,y.jsx)("em",{className:"icon ni ni-arrow-long-right"})]}):(0,y.jsxs)("button",{type:"button",onClick:function(){return l()},className:"btn btn-primary",children:[(0,y.jsx)("span",{children:"Connect Wallet"})," ",(0,y.jsx)("em",{className:"icon ni ni-arrow-long-right"})]})})})}},28259:function(e,t,n){"use strict";n.r(t);var r=n(24611),a=n(53755),s=n(23680),i=n(76870),c=n(99033),u=n(5779),o=n(44953),l=n(72106),d=n(7733),p=n.n(d),f=n(79428),m=n(78193),y=n(4802),h=n(52516);t.default=function(){var e=(0,c.v9)((function(e){return e.web3})),t=e.chainId,n=e.connected,d=e.signer,x=e.provider,b=e.address,v=((0,c.v9)((function(e){return e.auth})).user,(0,f.UO)()),g=v.userID,w=v.walletAddress,j=(0,i.useState)({}),k=(0,s.Z)(j,2),Z=k[0],T=k[1],N=(0,i.useState)([]),S=(0,s.Z)(N,2),C=S[0],A=S[1],F=(0,i.useState)(null),I=(0,s.Z)(F,2),P=I[0],q=I[1],M=(0,i.useState)(null),D=(0,s.Z)(M,2),Y=D[0],O=D[1],E=(0,i.useState)([]),_=(0,s.Z)(E,2),V=_[0],z=_[1],H=(0,i.useState)(0),W=(0,s.Z)(H,2),G=W[0],L=W[1],R=(0,i.useState)(0),X=(0,s.Z)(R,2),B=X[0],K=X[1],U=(0,i.useState)(!1),J=(0,s.Z)(U,2),Q=J[0],$=J[1],ee=(0,i.useState)({}),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ae=(0,i.useState)(0),se=(0,s.Z)(ae,2),ie=se[0],ce=se[1],ue=(0,i.useState)(""),oe=(0,s.Z)(ue,2),le=oe[0],de=oe[1];(0,i.useEffect)((function(){if(P&&n){ye();var e=u.sG.find((function(e){return e.value===P&&e.networkID===parseInt(t)}));O(e.type)}}),[P,n]),(0,i.useEffect)((function(){pe()}),[]);var pe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.aY.standard(".viewqrcode","Please wait..."),e.prev=1,e.next=4,p().post(u.T5+"/api/usersetting/getbyuserID",{userID:g});case 4:t=e.sent,u.aY.remove(".viewqrcode"),t.data&&(T(t.data),A(t.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),u.aY.remove(".viewqrcode"),u.aS.failure("Error Ocuured in API");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){Object.keys(Z).length>0&&fe()}),[n,Z]);var fe=function(){var e=u.sG.filter((function(e){return e.networkID===parseInt(t)}));e.length>0&&(console.log("filterValue",e[0].type),q(e[0].value),O(e[0].type),z(e))},me=V.map((function(e,t){return(0,h.jsx)("option",{value:e.value,children:e.label})}));(0,i.useEffect)((function(){if(""!==le&&parseFloat(le)>0&&parseFloat(B)>0){var e=parseFloat(le)/parseFloat(B);ce(e.toString())}else ce(0)}),[le,P,B]);var ye=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a,s,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(0),K(0),$(!0),!(n=u.sG.find((function(e){return e.value===P&&e.networkID===parseInt(t)})))||"coin"!==n.type){e.next=16;break}return e.next=7,(0,y.iZ)(d);case 7:return a=e.sent,e.next=10,(0,y.sq)(n.ids,C.defaultCurrency);case 10:s=e.sent,L(a),K(s),$(!1),e.next=27;break;case 16:if(!n||"token"!==n.type){e.next=27;break}return console.log("findasset.contractAddress",n.contractAddress),e.next=20,(0,y.yX)(n.contractAddress,b,d);case 20:return i=e.sent,e.next=23,(0,y.sq)(n.ids,C.defaultCurrency);case 23:c=e.sent,L(i),K(c),$(!1);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he="assets/images/logo.png";C.qrLogo&&(he=u.yA+C.qrLogo);var xe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==ie&&""!==le){e.next=3;break}return u.aS.failure("Fill All the Fields"),e.abrupt("return");case 3:if(u.L_.test(w)){e.next=6;break}return u.aS.failure("Invalid Sender ddress.Address start with 0x"),e.abrupt("return");case 6:if(!(parseFloat(le)<=0)){e.next=9;break}return u.aS.failure("Payment must be greater the zero"),e.abrupt("return");case 9:if(!(parseFloat(ie)<=0)){e.next=12;break}return u.aS.failure("Send token must be greater the zero"),e.abrupt("return");case 12:if(!(parseFloat(ie)>parseFloat(G))){e.next=15;break}return u.aS.failure("Low Balance"),e.abrupt("return");case 15:if(console.log("token",Y),u.aY.standard(".viewqrcode","Please wait... Don't Close"),"coin"!==Y){e.next=25;break}return e.next=20,(0,y.iW)(x,d,w,ie);case 20:(n=e.sent).status?be(n.txhash):u.aY.remove(".viewqrcode"),re(n),e.next=32;break;case 25:if("token"!==Y){e.next=32;break}return a=u.sG.find((function(e){return e.value===P&&e.networkID===parseInt(t)})),e.next=29,(0,y.RF)(x,d,a.contractAddress,w,ie);case 29:(s=e.sent).status?be(s.txhash):u.aY.remove(".viewqrcode"),re(s);case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={userID:g,invoiceAmount:le,currencySymbol:C.defaultCurrency,assetSymbol:P,assetPrice:B,paidAmount:ie,payerWalletAddress:b,txnHash:n,status:"Paid",chainId:t},e.next=4,p().post(u.T5+"/api/qrpayment",a);case 4:e.sent.data&&(ye(),pe(),de(""),ce(""),u.aY.remove(".viewqrcode")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u.aY.remove(".viewqrcode"),u.aS.failure("Erorr Occured Try Again");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:"modal-dialog modal-md",children:(0,h.jsx)("div",{className:"modal-content viewqrcode",children:(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:"row g-0",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsxs)("div",{className:"p-xl-1 p-3",children:[(0,h.jsx)("div",{className:"text-center mb-2",children:(0,h.jsx)("img",{src:he,className:"align-self-center",alt:"logo-img",height:70})}),(0,h.jsx)("h3",{className:"h3 mb-0 mt-3 text-center",children:C.qrName}),(0,h.jsx)("p",{className:"text-muted mt-1 mb-4 text-center",children:"Effortlessly View and Swiftly Pay Your Crypto Payments!"}),(0,h.jsx)("div",{className:"text-center",children:(0,h.jsx)(l.Z,{isRequired:!0,label:"Enter the ".concat(C.defaultCurrency," Amount You Want to Pay"),onChange:function(e){return de(e.target.value)},value:le,placeholder:""})}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("div",{className:"row",children:n&&(0,h.jsx)("div",{className:"col",children:(0,h.jsxs)("ul",{className:"checkout-list",children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"Select Asset"}),(0,h.jsx)("span",{children:(0,h.jsx)("select",{value:P,onChange:function(e){return q(e.target.value)},className:"form-select",children:me})})]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"Your Balance"}),(0,h.jsxs)("span",{className:"checkout-total",children:[parseFloat(G).toFixed(4)," ",P]})]}),(0,h.jsxs)("li",{children:[(0,h.jsxs)("span",{children:[P," Current Price"]}),(0,h.jsxs)("span",{className:"checkout-balance text-primary",children:[B," ",C.defaultCurrency]})]}),(0,h.jsxs)("li",{children:[(0,h.jsxs)("span",{children:[P," to Send"]}),(0,h.jsxs)("span",{className:"checkout-balance text-primary",children:[parseFloat(ie).toFixed(4)," ",P]})]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"Receiver Address"}),(0,h.jsx)("span",{className:"checkout-balance text-primary",children:w&&(0,o.Z)(w)})]})]})})}),ne&&ne.status&&Object.keys(ne).length>0&&(0,h.jsxs)("div",{role:"alert",class:"alert text-success bg-white border alert-dismissible",children:[(0,h.jsxs)("div",{class:"d-flex align-items-start",children:[(0,h.jsx)("span",{class:"badge badge-soft-success align-self-center me-3",children:"Success"}),(0,h.jsxs)("div",{class:"w-100",children:["Your Payment is successfully done ",(0,h.jsx)("a",{href:u.Fl[t]+ne.txhash,target:"_blank",class:"text-success alert-link",children:"View Transaction"})]})]}),(0,h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),ne&&Object.keys(ne).length>0&&!ne.status&&(0,h.jsxs)("div",{role:"alert",class:"alert text-danger bg-white border alert-dismissible",children:[(0,h.jsxs)("div",{class:"d-flex align-items-start",children:[(0,h.jsx)("span",{class:"badge badge-soft-danger align-self-center me-3",children:"Ohh no!"}),(0,h.jsxs)("div",{class:"w-100",children:["Your Payment is failed ",(0,h.jsx)("a",{href:u.Fl[t]+ne.txhash,target:"_blank",class:"text-danger alert-link",children:"View Transaction"})]})]}),(0,h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),n?(0,h.jsx)(i.Fragment,{children:(0,h.jsx)("div",{className:"mb-0 text-center d-grid",children:Q?(0,h.jsxs)("button",{class:"btn btn-outline-primary btn-sm",type:"button",children:[(0,h.jsx)("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"Fetching details.."]}):(0,h.jsx)("button",{className:"btn btn-primary",onClick:function(){return xe()},children:"Pay Now"})})}):(0,h.jsx)("div",{className:"my-3",children:(0,h.jsx)(m.Z,{})})]}),(0,h.jsx)("div",{className:"poweredby",style:{textAlign:"right"},children:(0,h.jsx)("img",{src:"assets/images/poweredby.png",className:"align-self-end",alt:"logo-img",height:40})})]})})})})," "]})})})})})}},36563:function(){},40127:function(){},27790:function(){},24654:function(){}}]);
//# sourceMappingURL=787.f4fcd3b5.chunk.js.map